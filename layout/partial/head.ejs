<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="/images/favicon/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/images/favicon/favicon.svg" />
<link rel="shortcut icon" href="/images/favicon/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png" />
<link rel="manifest" href="/images/favicon/site.webmanifest" />
<%
    var pageTitle = (page.title ? page.title + ' | ' : '') + config.title + (config.subtitle ? ' ' + config.subtitle : ''),
        description = page.description || page.excerpt || page.content || config.description || '';
    if (description) {
        description = strip_html(description).substring(0, 200).replace(/^\s+|\s+$/g, '');
    }
    var ogType = is_post() ? 'article' : 'website',
        ogImage = page.cover || page.image || theme.default_og_image;
%>
<title><%= pageTitle %></title>
<meta name="description" content="<%= description %>">
<meta property="og:type" content="<%= ogType %>">
<meta property="og:title" content="<%= pageTitle %>">
<meta property="og:url" content="<%= url_for(page.path) %>">
<meta property="og:site_name" content="<%= config.title %>">
<meta property="og:description" content="<%= description %>">
<meta property="og:locale" content="<%= config.language || 'en' %>">
<% if (ogImage) { %>
<meta property="og:image" content="<%= url_for(ogImage) %>">
<% } %>
<meta name="twitter:card" content="<%= ogImage ? 'summary_large_image' : 'summary' %>">
<meta name="twitter:title" content="<%= pageTitle %>">
<meta name="twitter:description" content="<%= description %>">
<% if (ogImage) { %>
<meta name="twitter:image" content="<%= url_for(ogImage) %>">
<% } %>
<%
  var palettes = palette_list ? palette_list() : [],
    pSelector = (theme.sidebar && theme.sidebar.palette_selector) ? theme.sidebar.palette_selector : {},
    defaultDark = pSelector.default_dark || 'midnight-sun',
    defaultLight = pSelector.default_light || 'paper-and-ink';
%>
<script>
  (function() {
    // Configured defaults
    var defaultDark = '<%= defaultDark %>',
      defaultLight = '<%= defaultLight %>';

    // Determine preference
    var pref = 'auto';
    try {
      let hashget = new URLSearchParams(window.location.hash.substring(1) ?? '');
      pref = hashget.get('theme') || localStorage.getItem('flux-palette-theme') || 'auto';
    } catch (e) {}

    // Resolve 'auto' to actual palette key
    var key = pref;
    if (pref === 'auto') {
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        key = defaultDark;
      } else {
        key = defaultLight;
      }
    }

    // Apply
    document.documentElement.setAttribute('data-palette', String(key).replace(/[^a-zA-Z0-9_-]/g, ''));
  })();
</script>
<link rel="stylesheet" href="<%= url_for('/css/palettes.css') %>">
<link rel="stylesheet" href="<%= url_for('/css/base.css') %>">
<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.15.3/dist/cdn.min.js"></script>