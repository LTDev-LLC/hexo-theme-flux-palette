<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="/images/favicon/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="/images/favicon/favicon.svg" />
<link rel="shortcut icon" href="/images/favicon/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png" />
<link rel="manifest" href="/images/favicon/site.webmanifest" />
<%
    var pageTitle = (page.title ? page.title + ' | ' : '') + config.title + (config.subtitle ? ' ' + config.subtitle : ''),
        description = page.description || page.excerpt || page.content || config.description || '';
    if (description) {
        description = strip_html(description).substring(0, 200).replace(/^\s+|\s+$/g, '');
    }
    var ogType = is_post() ? 'article' : 'website',
        ogImage = page.cover || page.image || theme.default_og_image;
%>
<title><%= pageTitle %></title>
<meta name="description" content="<%= description %>">
<meta property="og:type" content="<%= ogType %>">
<meta property="og:title" content="<%= pageTitle %>">
<meta property="og:url" content="<%= url_for(page.path) %>">
<meta property="og:site_name" content="<%= config.title %>">
<meta property="og:description" content="<%= description %>">
<meta property="og:locale" content="<%= config.language || 'en' %>">
<% if (ogImage) { %>
<meta property="og:image" content="<%= url_for(ogImage) %>">
<% } %>
<meta name="twitter:card" content="<%= ogImage ? 'summary_large_image' : 'summary' %>">
<meta name="twitter:title" content="<%= pageTitle %>">
<meta name="twitter:description" content="<%= description %>">
<% if (ogImage) { %>
<meta name="twitter:image" content="<%= url_for(ogImage) %>">
<% } %>
<%
  var palettes = palette_list ? palette_list() : [],
    defaultKey = (
        theme.sidebar?.palette_selector && theme.sidebar.palette_selector?.default
    ) ? theme.sidebar.palette_selector.default : 'abyssal-blue';
  var hasDefault = palettes.some(function (p) { return p.key === defaultKey; });
  if (!hasDefault && palettes.length) {
    defaultKey = palettes[0].key;
  }
%>
<script>
  (function() {
    var fallback = '<%= defaultKey %>';
    key = fallback;
    try {
      let hashget = new URLSearchParams(window.location.hash.substring(1) ?? '');
      key = hashget.get('theme') || localStorage.getItem('flux-palette-theme') || fallback;
    } catch (e) {}
    document.documentElement.setAttribute('data-palette', String(key).replace(/[^a-zA-Z0-9_-]/g, ''));
  })();
</script>
<link rel="stylesheet" href="<%= url_for('/css/palettes.css') %>">
<link rel="stylesheet" href="<%= url_for('/css/base.css') %>">
<% if (theme?.sidebar?.social_buttons?.enabled && theme.sidebar.social_buttons?.inject_iconify) { %>
<script src="https://cdn.jsdelivr.net/npm/iconify-icon/dist/iconify-icon.min.js"></script>
<% } %>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.15.3/dist/cdn.min.js"></script>